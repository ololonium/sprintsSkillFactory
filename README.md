
Проект Виртуальной стажировки по разработке мобильного приложения для ФСТР (Федерация Спортивного Туризма России).
С какой проблемой к нам обратился заказчик:
На сайте ФСТР ведётся база горных перевалов, которая пополняется туристами. После преодоления очередного перевала, турист заполняет отчёт в формате PDF и отправляет его на электронную почту федерации. Экспертная группа ФСТР получает эту информацию, верифицирует, а затем вносит её в базу, которая ведётся в Google-таблице. Весь процесс очень неудобный и долгий и занимает в среднем от 3 до 6 месяцев.
Как заказчик хочет решить эту проблему
ФСТР заказала студентам SkillFactory разработать мобильное приложение для Android и IOS, которое упростило бы туристам задачу по отправке данных о перевале и сократило время обработки запроса до трёх дней. Пользоваться мобильным приложением будут туристы. В горах они будут вносить данные о перевале в приложение и отправлять их в ФСТР, как только появится доступ в Интернет. Модератор из федерации будет верифицировать и вносить в базу данных информацию, полученную от пользователей, а те в свою очередь смогут увидеть в мобильном приложении статус модерации и просматривать базу с объектами, внесёнными другими.
Для пользователя в мобильном приложении будут доступны следующие действия:
- Внесение информации о новом объекте (перевале) в карточку объекта.

- Редактирование в приложении неотправленных на сервер ФСТР данных об объектах. На перевале не всегда работает Интернет.

- Заполнение ФИО и контактных данных (телефон и электронная почта) с последующим их автозаполнением при внесении данных о новых объектах.

Отправка данных на сервер ФСТР.

- Получение уведомления о статусе отправки (успешно/неуспешно).

- Согласие пользователя с политикой обработки персональных данных в случае нажатия на кнопку «Отправить» при отправке данных на сервер.

Пользователь с помощью мобильного приложения также будет передавать в ФСТР следующие данные о перевале:
- координаты перевала и его высота;

- имя пользователя;

- почта и телефон пользователя;

- название перевала;

- несколько фотографий перевала.

Допустимые значения поля status:

'new' - новая заявка(default-значение);
'pending' — на рассмотрении;
'accepted' — заявка принята;
'rejected' — заявка отклонена.
Описание методов API
Метод POST /submitData/
Этот метод принимает JSON в теле запроса с информацией о перевале.
Пример JSON:
{
  "add_time": "2023-11-23T14:04:57.820301Z",
  "beauty_title": "string111",
  "title": "string2",
  "other_titles": "string34",
  "connect": "string",
  "user": {
    "fam": "string",
    "name": "string",
    "otc": "string",
    "email": "user@example.com",
    "phone": "string"
  },
  "coordinates": {
    "latitude": 0.01,
    "longitude": 0,
    "height": 2147483647
  },
  "level": {
    "winter": "-",
    "summer": "-",
    "autumn": "-",
    "spring": "-"
  },
  "images": [
    {
      "data": "http://127.0.0.1:8000/sprint1/photos/pereval-1/WoWScrnShot_010123_162615.jpg",
      "title": "string1"
    }
  ]
}
Результатом выполнения метода является JSON-ответ содержащий следующие данные: 'status' + код HTTP, целое число:

 200 — запрос успешно обработан;
 400 — Bad Request (при нехватке полей);
 500 — ошибка при выполнении операции.
`message` — строка +

`Success` - если отправлено успешно или `Причина ошибки` - если она была
`id` — идентификатор, который был присвоен объекту при добавлении в базу данных (если "status":200).

Примеры JSON-ответов:
{ "status": 200, "message": "Success", "id": 42}
{ "status": 400, "message": "Empty request", "id": null}
{ "status": 500, "message": "Ошибка подключения к базе данных", "id": null}
Метод GET /submitData/
Этот метод получает одну запись (перевал) по её id с выведением всей информацию об перевале, в том числе статус модерации.
Пример JSON:
{
  "add_time": "2023-11-23T14:04:57.820301Z",
  "beauty_title": "string111",
  "title": "string2",
  "other_titles": "string34",
  "connect": "string",
  "user": {
    "fam": "string",
    "name": "string",
    "otc": "string",
    "email": "user@example.com",
    "phone": "string"
  },
  "coordinates": {
    "latitude": 0.01,
    "longitude": 0,
    "height": 2147483647
  },
  "level": {
    "winter": "-",
    "summer": "-",
    "autumn": "-",
    "spring": "-"
  },
  "images": [
    {
      "data": "http://127.0.0.1:8000/sprint1/photos/pereval-1/WoWScrnShot_010123_162615.jpg",
      "title": "string1"
    }
  ]
},
Примеры JSON-ответов:
{ "status": 200, "message": "Success", "id": 42 }
{ "status": 400, "message": "There's no such record", "id": null}
Метод PATCH /submitData/
Позволяет отредактировать существующую запись (замена), если она в статусе new. При этом редактировать можно все поля, кроме ФИО, адреса почты и номера телефона. В качестве результата изменения приходит ответ содержащий следующие данные:
state:

1 — если успешно удалось отредактировать запись в базе данных.
0 — отредактировать запись не удалось.
message: - сообщение об успешном редактировании при state=1) - сообщение о причине неудачного обновления записи при state=0)

Примеры JSON-ответов:
HTTP 200 OK
Allow: GET, PATCH, HEAD, OPTIONS
Content-Type: application/json
Vary: Accept
{
    "state": 1,
    "message": "Данные успешно отредактированы"
}
HTTP 200 OK
Allow: GET, PATCH, HEAD, OPTIONS
Content-Type: application/json
Vary: Accept
{
    "state": 0,
    "message": {
        "status": [
            "Значения new1 нет среди допустимых вариантов."
        ]
    }
}
Метод GET+email /submitData/?user_email=email
Возвращает данные всех объектов, отправленных на сервер пользователем с почтой email. Пример запроса:

GET /api/v2/submitData/email/?user_email=email
